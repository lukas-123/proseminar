\documentclass[hidelinks]{article}

%% Deutsche Silbentrennung und Sprache (neue Rechtschreibung)
\usepackage[ngerman]{babel}
%% Verwende Umlaute direkt
\usepackage[utf8x]{inputenc}
%% Hyperlinks für interne Referenzen
\usepackage{hyperref}
%% Grafiken einbinden
\usepackage{graphicx}
\usepackage{float}
%% Paket für Unterabbildungen pro Abbildung
\usepackage{subfig}

\usepackage{forloop}

\usepackage{enumerate}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\newcommand*\Let[2]{\State #1 $\gets$ #2}
\algrenewcomment[1]{\(\qquad \triangleright\) #1}
\algrenewcommand\algorithmicrequire{\textbf{Precondition:}}

\usepackage{mathtools}
% Proof system
\usepackage{amsthm}

\theoremstyle{plain}
\newtheorem{thm}{Satz}[section]
\newtheorem{lem}[thm]{Lemma}

\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem{bsp}[thm]{Beispiel}

\newtheoremstyle{rem} % name
    {\topsep}                    % Space above
    {\topsep}                    % Space below
    {}                   % Body font
    {}                           % Indent amount
    {\bf}                   % Theorem head font
    {:}                          % Punctuation after theorem head
    {.5em}                       % Space after theorem head
    {}  % Theorem head spec (can be left empty, meaning ‘normal’)

\theoremstyle{rem}
\newtheorem*{remark}{Bemerkung}

%\usepackage{xpatch}
%\makeatletter
%% Remove last point from definitions, theorems, etc.
%\xpatchcmd{\@thm}{\thm@headpunct{.}}{\thm@headpunct{\\}}{}{}
%\makeatother


% Seitenränder
\usepackage[margin=1.5in]{geometry}
% Zitate
\usepackage{cite}
% Tabellen
\usepackage[table]{xcolor}
\definecolor{lightblue}{HTML}{8ADAF2}
\definecolor{lightred}{HTML}{F2A28A}
\definecolor{lightgreen}{HTML}{A6F28A}
\definecolor{darkgreen}{HTML}{43A822}
\definecolor{grey}{HTML}{AAAAAA}


% Graphs
\usepackage{tikz}
\usepackage{tikz-3dplot}
\usepackage{pgfplots}
\usepgfplotslibrary{fillbetween}
\pgfplotsset{compat=1.12,
    every axis/.append style={
                    axis x line=middle,    % put the x axis in the middle
                    axis y line=middle,    % put the y axis in the middle
                    axis line style={->,color=black}, % arrows on the axis
                    xlabel={$x$},          % default put x on x-axis
                    ylabel={$y$},          % default put y on y-axis
				}}
            

\setlength{\parindent}{0pt}

\newcommand{\pgtwo}{PG(2, $\mathbb{F}$)\ }
\newcommand{\fnz}{\mathbb{F}\setminus\{0\}}
\newcommand{\ftwnz}{\mathbb{F}^{2}\setminus\{\boldsymbol 0\}}
\newcommand{\ftnz}{\mathbb{F}^{3}\setminus\{\boldsymbol 0\}}
\newcommand{\pu}{\mathcal{P}_U}
\newcommand{\gu}{\mathcal{G}_U}
\newcommand{\patinf}{\mathcal{O}}

%Rename of Literatur to Literaturverzeichnis
\addto{\captionsngerman}{\renewcommand{\refname}{Literaturverzeichnis}}

% Titel der Arbeit
\title{Elliptische-Kurven-Kryptographie}
% Angaben zum Author
\author{Kevin Kappelmann, Lukas Stevens}
\pagestyle{plain}

%------------------------------------------------------------------------------
\begin{document}

\pagenumbering{gobble}
\maketitle
\vspace{6em}
\begin{figure}[H]
\centering
    \begin{tikzpicture}
	\begin{axis}[
	    axis equal, 
	    %minor tick num={1},
	    %minor tick num={1},
	    %xtick={-2, 2},
	    %minor xtick={-1.5,-1,-0.5,0,0.5,1,1.5},
	    %minor ytick={-1.5,-1,-0.5,0,0.5,1,1.5},
	    %ytick={-2, 2},
	    ticks=none,
	    scale=2,
	    grid=none,
	    ]

	    \draw (0,1) node[label={260:\footnotesize $Q$}](Q){\textbullet};
	    \draw (-1,1) node[label={270:\footnotesize $P$}](P){\textbullet};
	    % quad for label positioning 
	    \draw (1,1) node[label={90:\footnotesize $P \oplus Q \quad $}](PQ){\textbullet};
	    \draw (1,-1) node[label={0:\footnotesize $P + Q$}](PQP){\textbullet};
	    \addplot +[no markers, raw gnuplot, thin, color=red] gnuplot {
		set size square;
		set xrange [-3:3];
		set yrange [-2:2];
		set contour base;
		set cntrparam levels incre 0,0.1,0;
		unset surface;
		set isosamples 1000, 1000;
		splot y**2 - x**3 + x - 1 
	    };
	    \addplot [thick, color=blue, domain=-2.5:2.5] {1};
	    \draw [dashed, thick, color=blue] (1,1) -- (1,-1);
	\end{axis}
    \end{tikzpicture}
\end{figure}

\newpage
\tableofcontents % Inhaltsverzeichnis
\listoffigures % Abbildungsverzeichnis
\listoftables % Tabellenverzeichnis 
\newpage

\pagenumbering{arabic}

\begin{sloppypar}

\section{Einleitung und Motivation}
Kryptosysteme wie RSA, Diffie-Hellman\footnote{In der jeweiligen Implementierung als Gruppe über ganze Zahlen} und ElGamal\footnotemark[\value{footnote}], die sich auf die Schwere der Primafaktorzerlegung bzw.\ dem diskreten Logarithmenproblem über Ganzzahlen stützen, benötigen sehr große Schlüssellängen, um eine ausreichend hohe Sicherheit zu garantieren. 
Daraus ergibt sich sowohl eine hoher Energie- als auch Speicherbedarf für die Berechnung der Algorithmen, was vor allem für Microchips und eingebettete Systeme ein Problem darstellt.\\
Eine Lösung für dieses Problem sind elliptische Kurven. Diese algebraischen Kurven tragen eine Gruppenstruktur, über die das diskrete Logarithmenproblem deutlich schwerer lösbar ist, als über Gruppen mit Ganzzahlen.
Kryptosysteme, die auf elliptische Kurven beruhen, kommen dadurch mit erheblich kürzeren Schlüsseln bei vergleichbarer Sicherheit aus.\cite[Seite~53]{nist}\\
Nachfolgende Tabelle verdeutlicht diesen Sachverhalt. Spalte 1 kennzeichnet die maximale Sicherheit (in Bits) für den jeweiligen Algorithmus und der angegebenen Schlüssellänge (in Bits). Rot markierte Felder gelten als kryptographisch unsicher, grüne als aktuell sicher.
\begin{table}[h]
\centering
	\begin{tabular}{| c | c | c |}
	\hline
	\rowcolor{lightblue}
	Sicherheitsniveau & RSA/Diffie-Hellman\footnotemark[\value{footnote}] & Elliptische-Kurven\\ \hline
	\rowcolor{lightred}
	$\le80$ 	& 1024 & 160-223 \\ \hline
	\rowcolor{lightgreen}
	112 	& 2048 & 224-255 \\ \hline
	\rowcolor{lightgreen}
	128 	& 3072 & 256-383 \\ \hline
	\rowcolor{lightgreen}
	192 	& 7680 & 384-511 \\ \hline
	\rowcolor{lightgreen}
	256 	& 15360 & 512+ \\ \hline
	\end{tabular}
\caption{Vergleich Schlüssellängen}
\label{keylength}
\end{table}

Die Verwendung elliptischer Kurven in der Kryptographie wurde Mitte der 1980er Jahre von Neal Koblitz\cite{koblitz} und Victor S. Miller\cite{miller} unabhängig voneinander vorgeschlagen. Aufgrund der vorteilhaften Eigenschaften gewinnt die \textbf{Elliptische-Kurven-Kryptographie} (kurz \textbf{ECC} für Elliptic Curves Cryptography) stets mehr an Bedeutung und löst ältere Verfahren wie RSA in den verschiedensten Bereichen ab. Vor allem in Umgebungen mit begrenzten Kapazitäten, wie z.B.\ Smartcards, ist ECC bereits weit verbreitet.\\
So verwendet beispielsweise Österreich seit 2004 als Vorreiter für alle gängigen Bürgerkarten ECC.\cite{austria} Aber auch die Reisepässe der meisten Europäischen Staaten nutzen inzwischen meist in einer Form ECC.\cite{eu}


\section{Grundbegriffe}
Um elliptische Kurven einführen zu können, müssen wir uns zunächst mit affiner und projektiver Geometrie und ihrer Verwandtheit auseinander setzen. Wir führen hierfür zunächst allgemein die Begriffe der affinen und projektiven Ebene ein und konstruieren uns eine projektive Ebene \pgtwo über einen beliebigen Körper $(\mathbb{F},+,*)$.\\\\
In den folgenden Kapiteln kürzen wir zu Gunsten der Notation den Körper $(\mathbb{F},+,*)$ mit $\mathbb{F}$ ab.\\


\subsection{Affine Ebenen}
\begin{defn}  \label{affine-ebene}
Es sei $\mathcal{A}$ eine Menge und $\mathcal{G}$ eine Teilmenge der Potenzmenge von $\mathcal{A}$, d.h. $\mathcal{G}\subseteq Pot(\mathcal{A})$.
Die Menge $\mathcal{A}$ nennt man die \textbf{Punktmenge} und die Menge $\mathcal{G}$ die \textbf{Geradenmenge} der affinen Ebene $(\mathcal{A},\mathcal{G})$, falls folgende drei Bedingungen erfüllt sind:
	\begin{enumerate}
		\item[(A1)] Zu je zwei Elementen $a, b\in \mathcal{A}$ mit $a\ne b$ existiert genau ein $G\in\mathcal{G}$ mit $a, b \in G$ (durch zwei verschiedene Punkte geht genau eine Gerade).\\
		Wir schreiben $\overline{a,b}$ für dieses G.
		\item[(A2)] Zu $G\in\mathcal{G}$ und $a\in\mathcal{A}\setminus G$ existiert genau ein $G'\in\mathcal{G}$ mit $a\in G'$ und $G\cap G'=\emptyset$ (durch jeden Punkt geht genau eine Gerade, die zu einer gegebenen Gerade parallel ist).\\
		Das sogenannte \textbf{Parallelenaxiom}.
		\item[(A3)] Es existieren drei Elemente $a,b,c\in\mathcal{A}$ mit $c\notin\overline{a,b}$ (es gibt drei Punkte, die nicht alle auf einer Gerade liegen).
	\end{enumerate}
\end{defn}

\begin{bsp}
Das \textbf{Minimalmodell} einer affinen Ebene umfasst genau 4 Punkte.\cite[Seite~16]{henn}
\begin{figure}[H]
\centering
\begin{tikzpicture}[scale=1.1,node distance=2.5cm,main node/.style={circle,fill=black,scale=0.75}]

\node at (0,0) [main node] (A) [label={[label]180:$a$}] {}; 
\node at (1.25,-2.5) [main node] (B) [label={[label]180:$b$}] {}; 
\node at (2.5,0)[main node] (D) [label={[label]0:$c$}] {};
\node at (1.25,-0.8) [main node] (C) [label={[label]0:$d$}] {};

\node at (3,-1.25) {$\boldsymbol\cong$};

\draw (A) -- (B) -- (C) -- (D) -- (A) -- (C)
      (D) -- (B);

\end{tikzpicture}
\begin{tikzpicture}[scale=1.1,node distance=2.5cm,main node/.style={circle,fill=black,scale=0.75}]

\node at (0,0) [main node] (A) [label={[label]180:$a$}] {}; 
\node at (0,-2.5) [main node] (B) [label={[label]180:$b$}] {}; 
\node at (2.5,-2.5)[main node] (C) [label={[label]0:$c$}] {};
\node at (2.5,0) [main node] (D) [label={[label]0:$d$}] {};

\draw (A) -- (B) -- (C) -- (D) -- (A) -- (C)
      (D) -- (B);
\end{tikzpicture}
\caption{Minimalmodell einer affinen Ebene}
\end{figure}

\end{bsp}

\begin{thm}
	Es sei $\mathbb{F}$ ein beliebiger Körper und $\mathbb{F}^2$ der zweidimensionale $\mathbb{F}$-Vektorraum mit Nullvektor $\boldsymbol 0$. Wir setzen
	\begin{equation*}
		\mathcal{G}\coloneqq\{a+\mathbb{F}b\mid a,b\in\mathbb{F}^2\land b\ne\boldsymbol 0\}
	\end{equation*}
	wobei $\mathbb{F}b=\{\lambda b\mid\lambda\in\mathbb{F}\}$ den von b erzeugten eindimensionalen Untervektorraum von $\mathbb{F}^2$ darstellt. Dann ist $(\mathbb{F}^2,\mathcal{G})$ eine affine Ebene.
\end{thm}
\begin{proof}
	Wir verweisen hier auf\cite[Seite~87]{karpfinger-kiechle}.
\end{proof}

\begin{bsp}
	Wählen wir für $\mathbb{F}$ den Körper $\mathbb{R}$, so erhalten wir für $(\mathbb{R}^2,\mathcal{G})$ die reelle affine Ebene (\textit{``Den zweidimensionalen Raum unserer Anschauung''}) mit Punkten und Geraden in der uns üblichen Interpretation.
\begin{figure}[H]
\centering
 \begin{tikzpicture}[scale=1,domain=-3:3] 
    \draw[step=1cm,very thin,color=gray] (-2.9,-2.9) grid (2.9,2.9);
    \draw[thick, ->] (-3.2,0) -- (3.2,0) node[right] {$x$}; 
    \draw[thick, ->] (0,-3.2) -- (0,3.2) node[above] {$y$};
    \foreach \x/\xtext in {-2, -1, 1, 2} 
	\draw (\x cm,1pt) -- (\x cm,-1pt) node[anchor=north,fill=white] {$\xtext$};
    \foreach \y/\ytext in {-2, -1, 1, 2} 
	\draw (1pt,\y cm) -- (-1pt,\y cm) node[anchor=east,fill=white] {$\ytext$};
    \draw[red] (-1.5,-0.5) node[right] {$a$};
    \draw[red] (1.5,2.5) node[right] {$b$};
    \draw[blue] (-1.5,-2.5) node[right] {$c$};
    \draw[blue] (1.5,0.5) node[right] {$d$};
    \draw[domain=-3:2,color=red]    plot (\x,1+\x)   node[right] {$\overline{a,b}$}; 
    \draw[domain=-2:3,color=blue]    plot (\x,-1+\x)   node[right] {$\overline{c,d}$};
    \filldraw[red] (-1.5,-0.5) circle[radius=2pt];
    \filldraw[red] (1.5,2.5) circle[radius=2pt];
    \filldraw[blue] (-1.5,-2.5) circle[radius=2pt];
    \filldraw[blue] (1.5,0.5) circle[radius=2pt];
    \draw (4,3) node[draw] {$\overline{a,b}\parallel\overline{c,d}$};
   \end{tikzpicture}
 \caption{Parallelen in der reellen affinen Ebene}
\end{figure}
\end{bsp}

\subsection{Projektive Ebenen}
\begin{defn} \label{projektive-ebene}
Es sei $\mathcal{P}$ eine Menge und $\mathcal{G}$ eine Teilmenge der Potenzmenge von $\mathcal{P}$, d.h. $\mathcal{G}\subseteq Pot(\mathcal{P})$.
Die Menge $\mathcal{P}$ nennt man die \textbf{Punktmenge} und die Menge $\mathcal{G}$ die \textbf{Geradenmenge} der projektiven Ebene $(\mathcal{P},\mathcal{G})$, falls folgende drei Bedingungen erfüllt sind:
	\begin{enumerate}
		\item[(P1)] Zu je zwei Elementen $P, Q\in \mathcal{P}$ mit $P\ne Q$ existiert genau ein $G\in\mathcal{G}$ mit $P, Q \in G$ (durch zwei verschiedene Punkte geht genau eine Gerade).\\
		Wir schreiben $\overline{P,Q}$ für dieses G.
		\item[(P2)] Für je zwei $G,H\in\mathcal{G}$ mit $G\ne H$ gilt $|G\cap H|=1$ (zwei verschiedene Geraden schneiden sich in genau einem Punkt).
		\item[(P3)] Es existieren vier verschiedene Elemente in $\mathcal{P}$, sodass immer höchstens zwei davon in jedem beliebigen $G\in\mathcal{G}$ liegen (es gibt vier Punkte, sodass nie drei davon auf derselben Gerade liegen).
	\end{enumerate}
\end{defn}
Im wesentlichen Unterschied zu affinen Ebenen existieren in einer projektiven Ebene \textbf{keine Parallelen}.

\begin{bsp}\label{fano}
Die \textbf{Fano-Ebene} ist das Minimalmodell einer projektiven Ebene und umfasst genau 7 Punkte (beachte: auch der Kreis gilt hier als Gerade!).\cite[Seite~9]{projmin}\\
Bemerkenswert ist die Tatsache, dass durch Entfernen einer beliebigen Gerade und den daraufliegenden Punkten eine affine Ebene entsteht. Dies ist kein Spezialfall sondern funktioniert immer, was wir auch im Abschnitt~\ref{konstr-aff-aus-proj} zeigen werden.
\begin{figure}[H]
\centering
\begin{tikzpicture}[node distance=1.5cm,main node/.style={circle,fill=black,scale=0.75}]

\node at (1.5,0) [main node] (A) [label={[label]180:$A$}] {}; 
\node at (0.63,-1.5) [main node] (B) [label={[label]180:$B$}] {}; 
\node at (-0.15,-3)[main node] (C) [label={[label]270:$C$}] {};
\node at (1.5,-3) [main node] (D) [label={[label]270:$D$}] {};
\node at (3.15,-3) [main node] (E) [label={[label]270:$E$}] {};
\node at (2.37,-1.5) [main node] (F) [label={[label]0:$F$}] {};
\node at (1.5,-2) [main node] (G) [label={[label]0:$G$}] {};

\draw (A) -- (B) -- (C) -- (D) -- (E) -- (F) -- (A)
	(B) -- (G) -- (D)
    (G) -- (F);
\draw (G) -- (E);
\draw (G) -- (A);
\draw (G) -- (C);

\draw (1.5,-2) circle [radius=1];

\end{tikzpicture}
\caption{Fano-Ebene}
\end{figure}
\end{bsp}


\subsubsection{Die projektive Ebene \pgtwo}
Es sei $\mathbb{F}$ ein beliebiger Körper mit Nullelement $0$ und $\mathbb{F}^3$ der dreidimensionale $\mathbb{F}$-Vektorraum mit Nullvektor $\boldsymbol 0$. Wir definieren eine Äquivalenzrelation~$\sim$ für alle $a,b\in\ftnz$ wie folgt:\\
\begin{equation*}
	a\sim b \Leftrightarrow \exists\lambda\in\fnz:\lambda a=b
\end{equation*}
Wir schreiben $[a]$ oder auch $(a_1:a_2:a_3)$ für die Äquivalenzklassen von $a=(a_1,a_2,a_3)\in\ftnz$.\\
Man bemerke: Für einen Vektor $a\in\ftnz$ stellt $[a]\cup\{\boldsymbol 0\}$ gerade den von a aufgespannten eindimensionalen Untervektorraum $\langle a \rangle=\mathbb{F}a=\{\lambda a\mid\lambda\in\mathbb{F}\}$ dar.\\

Weiters definieren wir uns die \textit{Quotientenmenge}, d.h.\ die Menge aller Äquivalenzklassen, als unsere Punktmenge:
\begin{equation*}
	\mathcal{P}\coloneqq(\ftnz)/\sim\ = \left \{[a]\mid a\in\ftnz\right \}
\end{equation*}
$\mathcal{P}$ stellt ein sogenanntes \textbf{homogenes Koordinatensystem} dar. Im Gegensatz zu den uns vertrauten (inhomogenen) Koordinaten, die jeden Punkt eindeutig identifizieren, haben homogene Koordinaten die Eigenschaft, dass sie für einen gegebenen Punkt nicht eindeutig bestimmt sind. So wird beispielsweise der Punkt $P=(2,4,8)\in\mathbb{R}^3$ sowohl von den homogenen Koordinaten $(1:2:4)$ als auch $(2:4:8)$ beschrieben.\\

Für zwei Punkte $P=[a],Q=[b]\in\mathcal{P}$ mit $P\ne Q$ setzen wir die Verbindungsgerade zwischen $P$ und $Q$ fest mit:
\begin{equation*}
	\overline{P,Q}\coloneqq\bigl \{[\lambda a+\mu b]\mid (0,0)\ne(\lambda,\mu)\in\mathbb{F}^2\bigr \}
\end{equation*}
Mit $\lambda=1$ und $\mu=0$ bzw.\ $\lambda=0$ und $\mu=1$ folgt direkt $P,Q\in\overline{P,Q}$.\\

Nun bilden wir noch die Menge aller Geraden:
\begin{equation*}
	\mathcal{G}\coloneqq\{\overline{P,Q}\mid P,Q\in\mathcal{P}\land P\ne Q\}
\end{equation*}
Man beachte, dass die Bedingung $[a]=P\ne Q=[b]$ gleichbedeutend ist mit der linearen Unabhängigkeit der Vektoren $a,b\in\mathbb{F}^3$. Für zwei Punkte $P,Q\in\mathcal{P}$ stellt $\overline{P,Q}\cup\{\boldsymbol 0\}$ also gerade den zweidimensionalen Untervektorraum $\langle a,b\rangle=\mathbb{F}a+\mathbb{F}b=\{\lambda a+\mu b\mid \lambda,\mu\in\mathbb{F}\}$ dar. 
Die Menge der Punkte einer Geraden $\overline{P,Q}$ entsprechen somit der Menge der eindimensionalen Untervektorräume, die jeweils als Teilmenge in $\mathbb{F}a+\mathbb{F}b$ enthalten sind. Formell ausgedückt:
\begin{equation*}
	[c]\in\overline{[a],[b]}\Leftrightarrow \mathbb{F}c\subseteq\mathbb{F}a+\mathbb{F}b\Leftrightarrow c\in\mathbb{F}a+\mathbb{F}b
\end{equation*}
\begin{defn}
	Es sei $V$ ein $n$-dimensionaler Vektorraum, $U$ ein beliebiger \mbox{$(n-1)$-dimensionaler} Untervektorraum von $V$ und $v\in V$ beliebig. Eine Teilmenge $H\subset V$ nennt man \textbf{Hyperebene} von $V$, wenn gilt:
\begin{equation*}
	H=v+U=\{v+u\mid u\in U\} 
\end{equation*}
\end{defn}
Wird für den Vektor $v$ der Nullvektor gewählt, so wird die erzeugte Ebene auch als \textit{lineare Hyperebene} bezeichnet.\\
In unserem Fall stellt also jede Gerade $\overline{P,Q}\cup\{\boldsymbol 0\}$ eine lineare Hyperebene über $\mathbb{F}^3$ dar.
\begin{thm}\label{hyperebene}
Es sei $V$ ein $n$-dimensionaler Vektorraum, $U$ ein beliebiger $(n-1)$-dimensionaler Untervektorraum von $V$ und $v\in V$ beliebig. 
Jede Hyperebene $H=v+U$ lässt sich für ein geeignetes $n\in V\setminus\{\boldsymbol 0\}$ äquivalent als Lösungsmenge einer homogenen linearen Gleichung beschreiben:
\begin{equation*}
	H=\{w\in V\mid \langle n,w-v\rangle=0\}
\end{equation*}
Wobei $\langle a,b\rangle$ das Standardskalarprodukt zweier Vektoren $a,b$ darstellt.
\end{thm}
\begin{proof}
	Wir verweisen hier auf\cite[Seite~189]{linalg}.
\end{proof}
\begin{remark}
Es ergibt sich, dass $n$ ein Normalenvektor zu $H$ sein muss.
\end{remark}
Satz~\ref{hyperebene} lässt eine alternative Definition unserer Geraden zu, die uns oft nützlich sein wird. Da alle Geraden $\overline{P,Q}\cup\{\boldsymbol 0\}$ lineare Hyperebenen sind, gilt nämlich für ein geeignetes \mbox{$n=(n_1,n_2,n_3)\in\ftnz$}:
\begin{equation*}
	\overline{P,Q}=\{(a_1:a_2:a_3)\in\mathcal{P}\mid n_1a_1+n_2a_2+n_3a_3=0\}
\end{equation*}
und somit
\begin{equation*}
	[c]\in\overline{P,Q}\Leftrightarrow n_1c_1+n_2c_2+n_3c_3=0
\end{equation*}

\begin{thm}
	Es ist \normalfont{\pgtwo}$\coloneqq(\mathcal{P},\mathcal{G})$ eine projektive Ebene über $\mathbb{F}$.
\end{thm}
\begin{proof}
	Wir müssen zeigen, dass die unter Definition~\ref{projektive-ebene} festgelegten Bedingungen (P1), (P2) und (P3) gelten.
\begin{enumerate}
	\item[(P1)] Es sei $P,Q\in\mathcal{P}$ mit $P\ne Q$. Durch Definition unserer Menge $\mathcal{G}$ folgt direkt $\overline{P,Q}\in\mathcal{G}$.
	Die Eindeutigkeit ergibt sich aus (P2).
	\item[(P2)] Es sei $G,H\in\mathcal{G}$ mit $P\ne Q$. Es gibt also zwei linear unabhängige Vektoren $(a,b,c),(a',b',c')\in\ftnz$ mit:
	\begin{align*}
	G & = \{(x:y:z)\in\mathcal{P}\mid ax+by+cz=0\}\quad\normalfont{und}\\
	H & =\{(x:y:z)\in\mathcal{P}\mid a'x+b'y+c'z=0\}
	\end{align*}
	Es folgt:
	\begin{equation*}
		G\cap H=\{(x:y:z)\in\mathcal{P}\mid ax+by+cz=0\land a'x+b'y+c'z=0\}
	\end{equation*}
	Dieses lineare Gleichungssystem hat als Lösungsmenge einen eindimensionalen Untervektorraum, also genau einen Punkt in $\mathcal{P}$. Folglich gilt $|G\cap H|=1$.
	\item[(P3)] Die vier Punkte $(1:0:0),(0:1:0),(0:0:1),(1:1:1)$ erfüllen die Bedingung.
\end{enumerate}
\end{proof}
\begin{bsp}
Mit Wahl von $\mathbb{F}=\mathbb{R}$ erhält man für PG(2,$\mathbb{R}$) die relle projektive Ebene, die über dasselbe Koordinatensystem, wie der euklidische Raum (\textit{``Der dreidimensionale Raum unserer Anschauung''}), definiert ist.\\
Die projektiven Punkte entsprechen den eindimensionalen Untervektorräumen von $\mathbb{R}^3$, d.h.\ die Menge aller Geraden durch den Ursprung und die Menge der projektiven Geraden entspricht analog der Menge aller Ebenen durch den Ursprung. Der Punkt $(0,0,0)$ ist dabei nicht enthalten.\\
Der Schnittpunkt zweier projektiven Geraden, d.h.\ anschaulich betrachtet zweier Ursprungsebenen, ergibt geanu eine Ursprungsgerade, also einen projektiven Punkt.\\
Wählt man zwei projektive Punkte $P,Q$, d.h.\ anschaulich betrachtet zwei Ursprungsgeraden, so ergibt sich als Verbindungsgerade $\overline{P,Q}$ die Ebene, die beide Geraden umfässt und durch den Ursprung verläuft.

\begin{figure}[H]
\tdplotsetmaincoords{80}{100}
\begin{tikzpicture}[
		tdplot_main_coords,
		axis/.style={->,black,thick},
		line/.style={thick,red},
		scale=0.8]

	% coordinates in (z,x,y)
	\filldraw[
		draw=darkgreen,%
		fill=darkgreen!20,%
	    ]          (-8,-2.5,0)
		    -- (-8,2.5,0)
		    -- (8,2.5,0)
		    -- (8,-2.5,0)
		    -- cycle;

	%draw the axes
	\draw[axis] (0,-3,0) -- (0,3,0) node[anchor=west]{$x$};
	\draw[axis] (0,0,-3) -- (0,0,3) node[anchor=west]{$y$};
	\draw[axis] (10,0,0) -- (-10,0,0) node[anchor=west]{$z$};

	\draw[line] (2,3,0) -- (-2,-3,0) node[anchor=east]{$P=[3:0:-2]$};
	\draw[line,blue] (6,3,0) -- (-6,-3,0) node[anchor=east]{$Q=[1:0:-2]$};
	\node[darkgreen] at (8,-3.0,0) {$\overline{P,Q}$};

\end{tikzpicture}
\qquad	
\tdplotsetmaincoords{80}{100}
\begin{tikzpicture}[
		tdplot_main_coords,
		axis/.style={->,black,thick},
		line/.style={thick,red},
		scale=0.8]

	% coordinates in (z,x,y)
	\filldraw[
		draw=darkgreen,%
		fill=darkgreen!20,%
	    ]          (0,-2.5,-2.5)
		    -- (0,-2.5,2.5)
		    -- (0,2.5,2.5)
		    -- (0,2.5,-2.5)
		    -- cycle;

	%draw the axes
	\draw[axis] (0,-3,0) -- (0,3,0) node[anchor=west]{$x$};
	\draw[axis] (0,0,-3) -- (0,0,3) node[anchor=west]{$y$};
	\draw[axis] (10,0,0) -- (-10,0,0) node[anchor=west]{$z$};

	\draw[line] (0,-3,-2) -- (0,3,2) node[anchor=west]{$P=[3:2:0]$};
	\draw[line,blue] (0,-3,-1) -- (0,3,1) node[anchor=west]{$Q=[3:1:0]$};
	\node[darkgreen] at (11,4.9,0) {$\overline{P,Q}$};

\end{tikzpicture}
	\caption{Punkte und Geraden projektiver reeller Ebenen}
\end{figure}
\end{bsp}


\subsubsection{Konstruktion affiner Ebenen aus projektiven Ebenen} \label{konstr-aff-aus-proj}
Wie wir bereits im Beispiel~\ref{fano} erkannt haben, erhält man durch Entfernen einer beliebigen Gerade einer projektiven Ebene und aller sich darauf befindenden Punkten, eine affine Ebene. Dies wollen wir nun beweisen.
\begin{thm} \label{projektive-zu-affinen}
Es sei $(\mathcal{P},\mathcal{G})$ eine projektive Ebene und $U\in\mathcal{G}$ beliebig. Wir definieren:
\begin{equation*}
	\pu\coloneqq\mathcal{P}\setminus{U},\quad \gu\coloneqq\left\{G\cap\pu\mid G\in\mathcal{G}\setminus\{U\}\right\}=\left\{G\setminus U\mid G\in\mathcal{G}\setminus \{U\}\right\}
\end{equation*}
Dann ist $(\pu,\gu)$ eine affine Ebene.
\end{thm}
\begin{proof}
Wir müssen zeigen, dass die unter Definition~\ref{affine-ebene} festgelegten Bedingungen (A1), (A2) und (A3) gelten.
\begin{enumerate}
	\item[(A1)] Zwei beliebige Punkte $P,Q\in\pu$ sind wegen (P1) durch genau eine Gerade verbunden. Diese Gerade wurde nicht entfernt, denn sonst wären auch auch die beiden Punkte $P,Q$ entfernt worden.
	\item[(A2)] Es sei $G_U\in\gu$, $G\in\mathcal{G}$ mit $G_U=G\setminus U$ und $P\in\pu\setminus G_U$. Die Gerade $G$ hatte wegen (P1) einen Schnittpunkt $F$ mit der Geraden $U$, der in $G_U$ entfernt wurde. Ebenfalls gibt es wegen (P1) eine Gerade $H_U\in\gu$ und eine Gerade $H\in\mathcal{G}$ mit $H_U=H\setminus U$, sodass $F,P\in H$. Da nach (P2) sich alle Geraden in genau einem Punkt schneiden und $H$ und $G$ sich im entfernten Schnittpunkt $F$ geschnitten haben, gilt $H_U\cap G_U=\emptyset$\\
	Jede andere Gerade in $\gu$ hat nach (P2) einen Schnittpunkt mit $G_U$, der nicht entfernt wurde. $H_U$ ist also die einzige Parallele von $G_U$ durch $P$.
\begin{figure}[H]
\centering
 \begin{tikzpicture}[scale=1,domain=0:4] 
    \draw[domain=0:4]    plot (\x,-0.5+1/2*\x)  node[right] {$H_U$}; 
    \draw[domain=0:4]    plot (\x,0)   node[right] {$G_U$};
    \draw[domain=0:4,red]    plot (\x,0.25-1/4*\x)   node[right] {$U$};
    \draw[red] (1,0) node[anchor=north] {$F$};
    \filldraw[red] (1,0) circle[radius=1.5pt];
    \draw (3,1) node[above] {$P$};
    \filldraw (3,1) circle[radius=1.5pt];
   \end{tikzpicture}
 \caption{Parallelen in \pgtwo nach Entfernen einer Geraden}
\end{figure}
	\item[(A3)] Wegen (P3) gibt es vier verschiedene Punkte $A,B,C,D\in\mathcal{P}$, sodass nie drei davon auf derselben Gerade liegen.\\
		Lag höchstens ein Punkt auf der entfernten Gerade $U$, folgt die Aussage mit den drei übrigen Punkten.\\
		Lagen zwei der vier Punkte auf $U$, o.B.d.A.\ sei dies $A,B$, so existiern zwei Geraden $\overline{A,C}$ und $\overline{B,D}$, die sich in einem Punkt $E$ schneiden, der nicht inzident zu $U=\overline{A,B}$ ist.
		Wäre nämlich $E$ inzident zu $\overline{A,B}$, dann würde aufgrund von (P1) $A\in\overline{B,D}$ und $B\in\overline{A,C}$ folgen, was im Widerspruch zur Annahme steht. Es gilt somit $E\in\pu$.\\
$E$ kann nicht inzident zu $\overline{C,D}$ sein, denn sonst würde aufgrund von (P1) $A,B\in\overline{C,D}$ gelten. Es folgt somit $E\notin\overline{C,D}$.
\begin{figure}[H]
\centering
 \begin{tikzpicture}[scale=1,domain=0:4] 
    \draw[red] (0,0) -- (4,0) node[right] {$U$};
    \draw (0.3,-0.3) -- (0.1,3);
    \draw (3.7,-0.3) -- (2,3);
    \draw (-0.5,2) -- (4,3);
    \draw (-0.34,2.46) -- (4,-0.3);
    \draw (0.07,-0.3) -- (2.87,3.5);

    \draw[red] (0.45,0) node[anchor=north] {$A$};
    \filldraw[red] (0.28,0) circle[radius=1.5pt];
    \draw[red] (3.38,0) node[below] {$B$};
    \filldraw[red] (3.55,0) circle[radius=1.5pt];
    \draw (2.1,2.7) node[left] {$C$};
    \filldraw (2.2,2.6) circle[radius=1.5pt];
    \draw (0.3,2.2) node[above] {$D$};
    \filldraw (0.16,2.15) circle[radius=1.5pt];
    \draw (1.32,1.38) node[below] {$E$};
    \filldraw (1.32,1.4) circle[radius=1.5pt];

   \end{tikzpicture}
 \caption{Nicht kollineare Punkte in \pgtwo nach Entfernen einer Geraden}
\end{figure}

\end{enumerate}
\end{proof}
\section{Elliptische Kurven $E$}
%Macht Lukas
\subsection{Die unendliche Gerade über \pgtwo}
%Isomorphismus von $\mathbb{F}^2 \rightarrow \mathcal{P}_U$
Um in~\ref{definition-ek} elliptische Kurven genau beschreiben zu können und in~\ref{affine-darstellung} eine affine Darstellung elliptischer Kurven herzuleiten, müssen wir $(\mathcal{P,G}) =$ \pgtwo nochmal betrachten.
Wir wählen dazu eine Gerade $U \in \mathcal{G}$ aus. 
Prinzipiell kann dazu jede Gerade gewählt werden. 
Es ist jedoch von Vorteil eine bestimmte Gerade zu wählen um das Rechnen mit der Weierstraß-Gleichung~(\ref{weierstrass}) zu vereinfachen. \\
\newline
Dazu wählen wir die Verbindungsgerade $U = \overline{P,Q}$ der Punkte $P = (1:0:0)$ und $Q = (0:1:0)$, d.h.\ $U = \left\{ (x:y:z) \in \mathcal{P} \mid z = 0 \right\}$. 
Diese Menge $U$ bezeichnen wir im Folgenden als unendlich ferne Gerade.
Im dreidimensionalen Raum ist das genau die $x,y$-Ebene mit $z=0$. \\ 
\begin{lem}[Isomorphismus von $\pu$ und $\mathbb{F}^2$]
    Gegeben die projektive Ebene $(\mathcal{P}, \mathcal{G}) = PG(2,\mathbb{F})$ und die unendlich ferne Gerade $U$, dann ist die Abbildung
    \begin{equation*}
        \phi: \mathbb{F}^2 \rightarrow \mathcal{P}_U,\ (a,b) \mapsto (a:b:1)
    \end{equation*}
    bijektiv und bildet Geraden auf Geraden ab, d.h. $\phi$ ist ein Isomorphismus von affinen Ebenen. 
\end{lem}
\begin{proof} \label{isomorphismus-lemma}
    Wie im Satz~\ref{projektive-zu-affinen} gezeigt wurde, erhält man eine affine Ebene, wenn man aus einer projektiven Ebene eine Gerade mitsamt allen ihren Punkten entfernt. Daraus folgt, dass es sich bei $(\mathcal{P}_U, \mathcal{G}_U)$ um eine affine Ebene handelt. Es sei $(a:b:c) \in \mathcal{P}_U$. Da gilt $(a:b:c) \notin U$, folgt $c \neq 0$. Das heißt $c^{-1}$ ist definiert, womit die Abbildung
    \begin{equation*}
        \phi(ac^{-1},bc^{-1}) = (ac^{-1}:bc^{-1}:1) = (a:b:c)
    \end{equation*}
    surjektiv ist. Die Injektivität gilt auch, da mit $(a,b) \neq (a',b')$ die Vektoren $(a,b,1)$ und $(a',b',1)$ linear unabhängig sind, womit $(a:b:1) \neq (a':b':1)$ folgt. \\
    \newline
    Jede Gerade in $\mathbb{F}^2$ ist von der Form $\overline{a,b} = \left\{ a + \lambda b \mid \lambda \in \mathbb{F}\land a,b \in \mathbb{F}^2 \land b \neq \boldsymbol 0 \right\}$. Für einen Punkt $P = a + \lambda b \in \overline{a,b}$ gilt dann:
    \begin{equation*}
        \begin{aligned}
            \phi(a + \lambda b) & = (a_1 + \lambda b_1 : a_2 + \lambda b_2 : 1) = (a_1 : a_2 : 1) + \lambda (b_1 : b_2 : 0) \\
            & \sim \mu (a_1 : a_2 : 1) + \mu \lambda (b_1 : b_2 : 0)
        \end{aligned}
    \end{equation*}
    Hierbei ist zu beachten, dass $\mu \in \fnz$ laut Definition der Äquivalenzrelation $\sim$ gilt. Man betrachte nun die Gerade
    \begin{equation*}
        G \coloneqq \left\{ u(a_1 : a_2 : 1) + v(b_1 : b_2 : 0) \mid (u,v) \in \ftwnz\} \right\}.
    \end{equation*}
    Alle Punkte der Bildmenge von $\phi$ liegen auf der Gerade $G$. Es wird nur ein Punkt nicht erreicht, nämlich der Punkt $R = (b_1 : b_2 : 0)$. Wie man sehen kann, gilt $G \cap U = R$. Es folgt $\phi(\overline{a,b}) = G \cap \pu \in \gu$.
\end{proof}
Insgesamt kann man sehen, dass man affine Geraden auf eine Teilmenge der projektiven Geraden abbilden kann. Außerdem bekommen diese affinen Geraden im Projektiven dann einen Schnittpunkt, der auf der unendlich fernen Gerade $U$ liegt.
\subsection{Definiton elliptischer Kurven} \label{definition-ek}
%Weierstraß-Gleichung, Nullstellenmenge des Polynoms, Charakteristiken(Singularitäten), affine Koordinatentransformation?
Wir haben bereits die projektive Ebene \pgtwo über beliebige Körper $\mathbb{F}$ eingeführt.\\
Diese hat die folgende Punktmenge:
\begin{equation*}
    P = \left\{(u:v:w) \mid (u,v,w) \in \ftnz \right\}
\end{equation*}
Nun wollen wir die Punktmenge $E$ der elliptischen Kurve einführen, welche eine Teilmenge der Punktmenge $\mathcal{P}$ ist, d.h. $E \subseteq \mathcal{P}$. 
Dazu benötigen wir Polynome in drei Unbekannten.
Der Polynomring mit drei Unbekannten über $\mathbb{F}$ ist mit 
\begin{equation*}
    \mathbb{F}[X,Y,Z] = \left\{ \sum_{k,l,m \geq 0} a_{k,l,m} \thinspace X^k Y^l Z^m \mid a_{k,l,m} \in \mathbb{F} \right\}
\end{equation*}
definiert. 
$F(X,Y,Z) = \sum_{k,l,m \geq 0} a_{k,l,m} \thinspace X^k Y^l Z^m \in \mathbb{F}[X,Y,Z]$ wird Polynom genannt. 
\begin{defn}[Elliptische Kurve] \label{weierstrass}
    Eine elliptische Kurve $E$ ist durch die Lösung der Weierstraß-Gleichung 
    \begin{equation*}
        Y^2Z + a_1XYZ + a_3YZ^2 = X^3 + a_2X^2Z + a_4XZ^2 + a_6Z^3
    \end{equation*}
    gegeben, wobei $a_i \in \mathbb{F}$ gilt und die Lösung keine Singularitäten besitzen darf.\cite[Seite~54]{milne2006}
    Da der zugrundeliegende Raum \pgtwo eine projektive Ebene ist, handelt es sich um eine projektive Kurve. 
    Wenn man die Gleichung als Polynom 
    \begin{equation*}
        F(X,Y,Z) = Y^2Z + a_1XYZ + a_3YZ^2 - X^3 - a_2X^2Z - a_4XZ^2 -a_6Z^3
    \end{equation*}
    schreibt, dann ist $E$ genau die Nullstellenmenge des Polynoms $F$. Bemerkenswert ist hier, dass es sich um ein homogenes Polynom vom Grad 3 handelt, d.h.\ für jedes Summenglied $a_{k,l,m}X^kY^lZ^m$ mit $a_{k,l,m} \neq 0$ gilt $k + l + m = 3$.
\end{defn}
\begin{defn}[Singularitäten]
	Eine Kurve $E$ ist singulär in einem Punkt \mbox{$P=(a:b:c)\in E$}, wenn gilt
    \begin{equation*}
        \frac{\partial F}{\partial X}(P) = \frac{\partial F}{\partial Y}(P) =  \frac{\partial F}{\partial Z}(P) = 0
    \end{equation*}
    Man sagt auch, dass die partiellen Ableitungen des Polynoms $F$ im Punkt $P$ verschwinden. Falls die elliptische Kurve $E$ in keinem Punkt singulär ist, dann bezeichnet man sie als nicht-singulär.\cite[Seite~227]{karpfinger-kiechle}
\end{defn}
\begin{bsp}[Singularitäten]
    Die folgenden Kurven sind jeweils in einem Punkt singulär. Damit gibt es mehrere Tangenten an diesen Punkt.
    \begin{figure}[H]
        \centering
        \subfloat[$y^2=x^3+x^2$]{
            \begin{tikzpicture}
                \begin{axis}[
                    scale=0.8,
                    ticks = none,
                    axis equal,
                    restrict y to domain = -4:4,
                    restrict x to domain = -1:1.6,
                    ]
                    \addplot [color=red, domain = -4:4, samples = 300, unbounded coords=jump]
                    ({1/(x^3 - 1)}, { (x/(x^3 - 1))^1.5});
                    \addplot [color=red, domain = -4:4, samples = 300, unbounded coords=jump]
                    ({1/(x^3 - 1)}, {-(x/(x^3 - 1))^1.5}); 
                \end{axis}
            \end{tikzpicture}}
        \qquad
        \subfloat[$y^2=x^3$]{
            \begin{tikzpicture}
                \begin{axis}[
                    scale=0.8,
                    ticks = none,
                    axis equal,
                    ]
                    \addplot [color=red, domain=-2:2, samples=300, unbounded coords=jump]
                    {sqrt(x^3)};
                    \addplot [color=red, domain=-2:2, samples=300, unbounded coords=jump]
                    {-sqrt(x^3)};
                \end{axis}
            \end{tikzpicture}}
        \caption{Kurven mit Singularitäten (Knoten und Spitze)}
    \end{figure}
\end{bsp}
Wir hatten eine elliptische Kurve $E$ als Nullstellenmenge des Polynoms $F(X,Y,Z)$ mit \mbox{$E \coloneqq \left\{(u:v:w) \in \mathcal{P} \mid F(u,v,w) = 0 \right\}$} definiert.
Jedoch handelt es sich bei Punkten in der projektiven Ebene und damit auch bei den Elementen von $E$ um Äquivalenzklassen. Deswegen müssen wir noch die Wohldefiniertheit der Nullstellen begründen. 
Wir rufen uns dazu noch einmal die Definition der Äquivalenzrelation $\sim$ ins Gedächtnis: 
\begin{equation*}
	(u:v:w) \sim (u':v':w') \Leftrightarrow \exists \lambda \in \fnz: (u,v,w) = \lambda (u',v',w')
\end{equation*}
Wir setzen ein:
\begin{equation*}
    F(u',v',w') = F(\lambda u, \lambda v, \lambda w) = \lambda^3 F(u,v,w).
\end{equation*}
Die zweite Äquivalenz folgt aus der Homogenität des Polynoms. Daraus folgt, dass die Nullstellen von $F$ in $\mathcal{P}$ wohldefiniert sind:
\begin{equation*}
    F(u,v,w) = 0 \Leftrightarrow F(\lambda u, \lambda v, \lambda w) = 0.
\end{equation*}
Wir wollen nun noch eine Einschränkung treffen: die Charakteristik des Körpers $\mathbb{F}$ soll nicht 2 und nicht 3 sein. Wir schreiben $char \: \mathbb{F} \neq 2$ bzw.\ $char \: \mathbb{F} \neq 3$. 
Dies bedeutet, dass $1 + 1 \neq 0$ bzw.\ $1 + 1 + 1 \neq 0$, oder anders gesagt: Wenn wir das neutrale Element der Multiplikation 2 bzw.\ 3 mal addieren, dann erhalten wir nicht das neutrale Element der Addition, welches kein multiplikatives Inverses hat. \\
Dadurch wird die Allgemeinheit für den Fall, dass $\mathbb{F}$ eine dieser Charakteristiken hat, eingeschränkt. Grundsätzlich können die folgenden Methoden auch auf Körper mit $char \: \mathbb{F}=2$ oder $char \: \mathbb{F}=3$ angewandt werden. Es sind dann jedoch meistens Fallunterscheidungen notwendig. Wir verweisen dafür auf Silverman~\cite[Seite~44]{silverman}.  \\ \newline
%Zitat? Seite 50 Milner
Wenn $char \: \mathbb{F} \neq 2$ und $char \: \mathbb{F} \neq 3$ gegeben ist, dann können wird die Weierstraß-Gleichung~(\ref{weierstrass}), welche die Form
\begin{equation*}
    Y^2Z + a_1XYZ + a_3YZ^2 = X^3 + a_2X^2Z + a_4XZ^2 + a_6Z^3
\end{equation*}
hat, umformen. Mit einer Koordinatentransformation kann man die Gleichung
\begin{equation} \label{reduziert-weierstrass}
    Y^2Z = X^3 + aXZ^2 + bZ^3
\end{equation}
herleiten~\cite[Seite~50]{milne2006}.
\subsection{Affine Darstellung elliptischer Kurven} \label{affine-darstellung}
Wir wollen eine affine Darstellung herleiten. Dazu zeigen wir zunächst, dass nur ein Punkt der unendlich fernen Gerade $U$, nämlich der Punkt $\patinf = (0:1:0)$, auf $E$ liegt.  Für $P \in U$ gilt $P = (u:v:0)$ mit $u,v \in \mathbb{F}$. Es gibt, bis auf Äquivalenz, drei Möglichkeiten Punkte zu erzeugen, die 0 als Z-Koordinate haben: $P = (1:0:0)$, $Q = (u:v:0)$ mit $u,v \in \fnz$ und $\patinf = (0:1:0)$. 
Wenn wir diese Punkte in die Gleichung~(\ref{reduziert-weierstrass}) einsetzen, dann löst nur $\patinf$ die Gleichung.\\ 
Deswegen gilt für jeden Punkt $P \in E$ mit $P \neq \patinf$, dass die Z-Koordinate ungleich null ist. Es gilt also $P \in \pu$, d.h.\ alle Punkte, bis auf $\patinf$, liegen auf dem affinen Teil der projektiven Ebene \pgtwo. 
Aufgrund der Äquivalenzrelation $\sim$ können wir o.B.d.A.\ annehmen, dass $P \in \left\{(u:v:1) \mid u,v \in \mathbb{F} \right\}$. Wenn wir also nur diese Punkte betrachten, können wir die Gleichung~(\ref{reduziert-weierstrass}) vereinfachen und erhalten die affine Gleichung $y^2 = x^3 + ax + b$ oder als Polynom: 
\begin{equation} \label{affines-polynom}
    f(x,y) \coloneqq y^2 - x^3 - ax - b
\end{equation}
Wir wissen aus Satz~\ref{projektive-zu-affinen}, dass $\pu$ genau die Punktmenge einer affinen Ebene ist. Wenn wir zusätzlich die Abbildung $\phi$ aus Lemma~\ref{isomorphismus-lemma} auf $\pu$ anwenden, dann zerfällt die Punktmenge der elliptischen Kurve $E$ in zwei Teilmengen, einen affinen Teil und den unendlichen Punkt $\patinf$:
\begin{equation} \label{elliptic-curve-aff-inf}
    E = \left\{(u:v:1) \mid (u,v) \in \mathbb{F}^2 \land f(u,v) = 0 \right\} \cup \left\{ \patinf \right\}
\end{equation}
Wir können im Anschluss nur den affinen Teil betrachten, wenn wir den Punkt $\patinf$ nicht außer Acht lassen.
\begin{bsp}
    Skizzen elliptischer Kurven über dem Körper $\mathbb{R}$.
    \begin{figure}[H]
        \centering
        \subfloat[$y^2=x^3 + 0.5x + 2$]{
            \begin{tikzpicture}
                \begin{axis}[
                    axis equal, 
                    scale=0.8
                    ]
                    \addplot +[no markers, raw gnuplot, thin, color=red] gnuplot {
                        set size square;
                        set xrange [-3:3];
                        set yrange [-3:3];
                        set contour base;
                        set cntrparam levels incre 0,0.1,0;
                        unset surface;
                        set isosamples 1000, 1000;
                        splot y**2 - x**3 - 0.5*x - 2
                    };
                \end{axis}
            \end{tikzpicture}}
        \qquad
        \subfloat[$y^2=x^3 - 2x$]{
            \begin{tikzpicture}
                \begin{axis}[
                    scale=0.8,
                    axis equal,
                    ]
                    \addplot +[no markers, raw gnuplot, thin, color=red] gnuplot {
                        set size square;
                        set xrange [-3:3];
                        set yrange [-3:3];
                        set contour base;
                        set cntrparam levels incre 0,0.1,0;
                        unset surface;
                        set isosamples 1000, 1000;
                        splot y**2 - x**3 + 2*x
                    };
                \end{axis}
            \end{tikzpicture}}
        \caption{Beispiele elliptischer Kurven}
	\label{fig:elliptic-curves}
    \end{figure}
\end{bsp}


\section{Eine Gruppe über $E$}
Nachdem wir die Menge $E$ einer elliptischen Kurve definiert haben, wollen wir nun eine abelsche Gruppe über diese Menge konstruieren. Hierzu führen wir zunächst Tangenten für die Punktmenge elliptischer Kurven ein und stellen dann eine Verknüpfungsoperation auf.\\

In den folgenden Kapiteln beschränken wir uns auf auf elliptische Kurven $E$ über Körpern $\mathbb{F}$ mit folgenden Voraussetzungen:
\begin{itemize}
	\item Es gelte $char\ \mathbb{F}\ne2,3$
	\item $E$ sei nicht singulär, d.h.\ insbesondere das Polynom $x^3+ax+b\in\mathbb{F}[x]$ hat keine mehrfache Nullstelle.
\end{itemize}

\subsection{Tangenten elliptischer Kurven}
\begin{defn}
	Es sei $P$ ein Punkt der elliptischen Kurve $E$. Wir definieren die Tangente an $E$ im Punkt $P$:
\begin{equation*}
	T_P\coloneqq\Bigl\{(u:v:w)\in\mathcal{P}\mid\frac{\partial F}{\partial X}(P)u+\frac{\partial F}{\partial Y}(P)v+\frac{\partial F}{\partial Z}(P)w=0\Bigr\}
\end{equation*}
\end{defn}
Wir zeigen nun, dass $T_P$ eine Gerade in \pgtwo ist, die den Punkt $P$ enthält. Wie gewohnt bezeichne $U=\left\{ (x:y:z) \in \mathcal{P} \mid z = 0 \right\}$ die unendlich ferne Gerade.

\begin{lem}\label{proj-tang}
	Es sei $P$ ein Punkt der elliptischen Kurve $E$. Dann gilt $T_P\in\mathcal{G}$ und $P\in T_P$.
\end{lem}
\begin{proof}
	Wir bestimmen die partiellen Ableitungen von $F$:
	\begin{equation*}
		\frac{\partial F}{\partial X}=-3X^2-aZ^2,\quad \frac{\partial F}{\partial Y}=2YZ,\quad \frac{\partial F}{\partial Z}=Y^2-2aZX-3bZ^2
	\end{equation*}
	\underline{1. Fall:} $P=\patinf=(0:1:0)$. Dann gilt:
	\begin{equation*}
		\frac{\partial F}{\partial X}(\patinf)=\frac{\partial F}{\partial Y}(\patinf)=0,\quad \frac{\partial F}{\partial Z}(\patinf)=1
	\end{equation*}
	Das bedeutet:
	\begin{equation*}
		T_{\patinf}=\{(u:v:w)\in P\mid 0u+0v+1w=0\}=\{(u:v:w)\in P\mid w=0\}=U
	\end{equation*}
	Die Tangente im Punkt $\patinf$ ist also genau die unendlich ferne Gerade $U$.\\

	\underline{2. Fall:} $P\ne\patinf$. Es gilt also $P\notin U$ womit wir ohne Einschränkung $P=(x:y:1)$ voraussetzen können. Für die Tangente erhalten wir:
	\begin{equation*}
		T_{P}=\{(u:v:w)\in P\mid (-3x^2-a)u+2yv+(y^2-2ax-3b)w=0\}
	\end{equation*}
	$T_P$ stellt also ein lineares homogenes Gleichungssystem mit drei Variablen $u,v,w$ dar und besitzt somit als Lösungsmenge einen zweidimensionalen Untervektorraum von $\mathbb{F}^3$, falls nicht alle Koeffizienten gleich 0 sind. Hieraus folgt, dass $T_P$ eine Gerade in \pgtwo ist.\\
	Wir zeigen nun, dass im Fall $y=0$ sofort $3x^2+a\ne0$ folgt, also immer mindestens ein Koeffizient des Gleichungssystems nicht 0 ist.\\
	Sei also $y=0$. Dann gilt $x^3+ax+b=0$, da $P=(x:0:1)$ auf $E$ liegt. Dieses Polynom hat nach Voraussetzung keine mehrfachen Nullstellen, deshalb ist $x$ nicht Nullstelle der Ableitung $3x^2+a$, also $3x^2+a\ne0$.\\
	Nun müssen wir noch $P\in T_P$ zeigen. Dazu setzen wir den Punkt $P$ in das Gleichungssystem für $T_P$ ein:
	\begin{align*}
		(-3x^2-a)x+2yy+(y^2-2ax-3b)&=-3x^3-3ax+3y^2-3b\\
	    &=3\underbrace{(y^2-x^3-ax-b)}_{=f(x,y)=0}\stackrel{(\ref{elliptic-curve-aff-inf})}{=}0
	\end{align*}
	Folglich gilt $P\in T_P$.
\end{proof}
\begin{bsp}
	Wir bestimmen die Tangente an $E$ über $F(X,Y,Z)=Y^2Z-X^3+2XZ^2$ im Punkt \mbox{$P=(0:0:1)$}. Die Ableitungen sind:
	\begin{equation*}
		\frac{\partial F}{\partial X}=-3X^2+Z,\quad \frac{\partial F}{\partial Y}=2YZ,\quad \frac{\partial F}{\partial Z}=Y^2+4XZ
	\end{equation*}
	Somit folgt:
	\begin{equation*}
		\frac{\partial F}{\partial X}(P)=1,\quad \frac{\partial F}{\partial Y}(P)=0,\quad \frac{\partial F}{\partial Z}(P)=0
	\end{equation*}
	Für die Tangente ergibt sich also:
	\begin{equation*}
		T_P=\{(u:v:w)\in \mathcal{P}\mid u=0\}
	\end{equation*}
	Affin gedeutet ist $P$ der Nullpunkt und $T_P$ genau die y-Achse. Die Tangente entspricht genau dem, was man sich anschaulich als Tangente für den Punkt vorstellen würde. Dies ist in Abbildung~\ref{fig:elliptic-curves}(b) sichtbar.
\end{bsp}
Nun wollen wir die Tangenten der Kurve $E$ ins affine Übersetzen. Die affine Darstellung wird uns dabei vor allem in Abschnitt~\ref{schnittpunkt-verkn} als nützlich erweisen.
\begin{lem}\label{aff-tang}
	Für $P=(x:y:1)\in E\setminus\{\patinf\}$ dürfen wir ohne Einschränkung $P=(x,y)$ als affinen Punkt auffasen. Dann gilt:
	\begin{equation*}
		T_P\setminus U =\Bigl\{(u,v)\mid \frac{\partial f}{\partial x}(P)(u-x)+\frac{\partial f}{\partial y}(P)(v-y)=0\Bigr\}
	\end{equation*}
\end{lem}
\begin{proof}
Wir bestimmen die partiellen Ableitungen von $F$ an der Stelle $P$:
\begin{equation*}
		\frac{\partial F}{\partial X}=-3x^2-a=\frac{\partial f}{\partial x},\quad \frac{\partial F}{\partial Y}=2y=\frac{\partial f}{\partial y},\quad \frac{\partial F}{\partial Z}=y^2-2ax-3b
\end{equation*}
Da $P$ auf $T_P$ liegt gilt:
\begin{equation}\label{aff-p-in-tp}
	\frac{\partial f}{\partial x}(P)x+\frac{\partial f}{\partial y}(P)y=-\frac{\partial F}{\partial Z}(P)
\end{equation}
Für einen beliebigen Punkt $Q\in\mathcal{P}$ erhalten wir:
\begin{align*}
	Q\in T_P\setminus U & \Leftrightarrow Q=(u:v:1)\in T_P\\
			    & \Leftrightarrow \frac{\partial F}{\partial X}(P)u+\frac{\partial F}{\partial Y}(P)v+\frac{\partial F}{\partial Z}(P)=0\\
	      & \stackrel{(\ref{aff-p-in-tp})}{\Leftrightarrow} \frac{\partial f}{\partial x}(P)u+\frac{\partial f}{\partial y}(P)v-\frac{\partial f}{\partial x}(P)x-\frac{\partial f}{\partial y}(P)y=0\\
	& \Leftrightarrow \frac{\partial f}{\partial x}(P)(u-x)+\frac{\partial f}{\partial y}(P)(v-y)=0
\end{align*}
Somit gilt die Behauptung.
\end{proof}
Setzen wir einen Punkt $(u,v)=Q\ne P=(x,y)\ne(x,0)$ mit $Q\in T_P\setminus U$ und somit $u\ne x$ in die Tangentengleichung ein, so können wir die Steigung von $T_P\setminus U$ bestimmen:
\begin{alignat*}{4}
    	&&(-3x^2-a)(u-x)+2y(v-y)&=0\\
	%dirty alignment cheat, but i'm too tired to fix it...
	\Leftrightarrow\hspace{1.13em}&&2y(v-y)&=-(-3x^2-a)(u-x)\\
	\stackrel{x\ne u,y\ne0}{\Leftrightarrow}&&\frac{v-y}{u-x}&=\frac{3x^2+a}{2y}
\end{alignat*}
Wenn wir einen Punkt $P=(x,0)\in E$ in die Tangentengleichung einsetzen, erhalten wir:
\begin{alignat*}{4}
    	&&(-3x^2-a)(u-x)+0(v-0)&=0\\
	%dirty alignment cheat, but i'm too tired to fix it...
	\Leftrightarrow\hspace{1.48em}&&(-3x^2-a)(u-x)&=0\\
	\stackrel{-3x^2-a\ne0}{\Leftrightarrow}&&x-u&=0
\end{alignat*}
Das bedeutet: 
\begin{equation*}
	Q=(u,v)\in T_P\setminus U\Leftrightarrow Q=(x,v)
\end{equation*}
Die Tangente ist also in diesem Fall eine Parallele zur y-Achse durch den Punkt P. Formell:
\begin{equation*}
	T_P\setminus U=x+\mathbb{F}(0,1)
\end{equation*}

\subsection{Schnittpunkte von Geraden mit elliptischen Kurven}
Bevor wir im nächsten Abschnitt eine Verknüpfungsoperation definieren, betrachten wir die Menge der Schnittpunkte einer Geraden mit der Punktmenge $E$.\\

\textbf{Die unendlich ferne Gerade} $U$ schneidet die Punktmenge E nur im unendlich fernen Punkt $\patinf$. Nach Lemma~\ref{proj-tang} gilt $U=T_{\patinf}$.\\

\textbf{Affine Geraden der Form} $y=kx+d$ schneiden die Punktmenge $E$ wie folgt. Wir setzen $y=kx+d$ in die Gleichung~(\ref{affines-polynom}) ein und erhalten:
\begin{equation}\label{aff-ger-elip}
	(kx+d)^2=x^3+ax+b\Leftrightarrow 0=x^3+ax+b-(kx+d)^2
\end{equation}
Dies ist eine kubische Gleichung für die x-Koordinaten der Schnittpunkte bzw.\ der Nullstellen. Somit gibt es im Allgemeinen drei Schnittpunkte der affinen Geraden mit $E$, es seien dies $(x_1,y_1),(x_2,y_2),(x_3,y_3)$.\\
Die drei x-Koordinaten müssen nicht voneinander verschieden sein, aber falls $x_i=x_j$ für $i\ne j$ gilt, dann auch $y_i=y_j\ne 0$ und die affine Gerade ist genau die Tangente $T_P\setminus U$ an $E$ im Punkt $P=(x_i,y_i)$.
Ist nämlich $x_i$ eine doppelte Nullstelle der Gleichung~(\ref{aff-ger-elip}), muss, da $E$ nicht singulär ist und $x^3+ax+b$ somit keine mehrfache Nullstelle hat, $kx_i+d\ne 0$ gelten und aufgrund der Vielfachheit der Nullstelle die folgende Gleichung, die durch Ableiten aus Gleichung~(\ref{aff-ger-elip}) entsteht, erfüllen:
\begin{equation*}
	2(kx_i+d)k=3x_i^2+a \stackrel{kx_i+d\ne0}{\Leftrightarrow}k=\frac{3x_i^2+a}{2(kx_i+d)}=\frac{3x_i^2+a}{2y_i}
\end{equation*}
Die Steigung $k$ der affinen Gerade $y=kx+d$ entspricht somit genau der Steigung von $T_P\setminus U$. Da $P$ sowohl auf $T_P\setminus U$ als auch auf der affinen Gerade liegt, gilt folglich Gleichheit.\\

\textbf{Eine Parallele zur y-Achse} $v+\mathbb{F}(0,1)$ mit $v=(x,y)$ hat mit $E$ im projektiven den unendlich fernen Punkt $\patinf$ gemeinsam. Es gilt nämlich:
\begin{equation*}
	\phi(v+\lambda(0,1))=[\mu(x,y,1)+\mu\lambda(0,1,0)]
\end{equation*}
Somit hat die Gerade im projektiven einen Schnittpunkt mit $\patinf=(0:1:0)$.\\
Außerdem hat die Gerade zwei weitere affine Schnittpunkte
\begin{equation*} 
	P_{1,2}=(x,\pm \sqrt{x^3+ax+b})
\end{equation*}
wobei erneut im Fall von $P_1=P_2=(x,0)$ aus Lemma~\ref{aff-tang} mit $P_i=(x,0)$ folgt, dass die y-Achse eine Tangente an $E$ in $P_i$ ist.

\subsection{Die Schnittpunkt-Verknüpfung $\oplus $ über $E$}\label{schnittpunkt-verkn}
Wir definieren nun eine Verknüpfung $\oplus$ auf $E$, die die Grundlage für unsere Gruppenoperation im nächsten Kapitel bilden wird. 
Hierfür legen wir grundsätzlich für zwei Punkte $P,Q\in E$ das Ergebnis der Verknüpfung $P\oplus Q$ als dritten Schnittpunkt der Geraden $\overline{P,Q}$ mit $E$ fest.
Allerdings stellt sich die Frage, was passieren soll, wenn $P=Q$ gilt oder wenn die Gerade $\overline{P,Q}$ nicht drei Schnittpunkte mit $E$ besitzt.\\
Wir treffen hierfür folgende Festlegungen für $P,Q\in E$:
\begin{itemize}
	\item Ist $P=Q$, so sei $\overline{P,P}\coloneqq T_P$
	\item Ist $P=Q$ und $T_P$ hat mit $E$ nur den Schnittpunkt $P$, so sei $P\oplus P=P$
	\item Ist $\overline{P,Q}=T_P$, aber $P\ne Q$, so sei $P\oplus Q=P$
	\item Ist $\overline{P,Q}=T_Q$, aber $P\ne Q$, so sei $P\oplus Q=Q$
	\item Sonst sei $P\oplus Q$ der dritte Schnittpunkt der Geraden $\overline{P,Q}$ mit $E$
\end{itemize}
Wir zeigen, dass die Verknüpfungsoperation $\oplus$ abgeschlossen ist und geben eine explizite Formel für die Koordinaten von $P\oplus Q$ an.
Zuvor stellen wir noch fest, dass $\oplus$ offenbar kommutativ ist, was wir im folgenden ausnutzen werden.
\begin{thm} \label{oplus-op}
    Es sei $P=(x,y),Q=(u,v)\in E\setminus\{\patinf\}$. Dann gilt:
    \begin{align*}
	    \patinf\oplus\patinf&=\patinf,\quad \patinf\oplus P=(x,-y)\eqqcolon-P\quad\normalfont{und}\\
	    P\oplus Q&=
	    \begin{cases}
		    \patinf, & \text{falls }P=-Q\\
		    (w,k(w-x)+y), & \text{sonst}
	    \end{cases}
    \end{align*}
    wobei
    \begin{align*}
	    w=k^2-x-u\quad\normalfont{und}\quad k=
	    \begin{cases}
		\frac{v-y}{u-x}, & \text{falls }P\ne\pm Q\\
		\frac{3x^2+a}{2y}, & \text{falls }P=Q\ne -P
	    \end{cases}
    \end{align*}
\end{thm}
\begin{proof}
\underline{1. Fall:} $\patinf\oplus\patinf$: Es gilt nach Lemma~\ref{proj-tang} $T_{\patinf}=U$ für die unendlich ferne Gerade $U$. Da $\patinf$ der einzige Schnittpunkt von $U$ und $E$ ist, gilt $\patinf\oplus\patinf=\patinf$\\

\underline{2. Fall:} $\patinf\oplus P$: Es gilt:
\begin{equation*}
	\overline{\patinf,P}=\bigl\{[\lambda(0,1,0)+\mu(x,y,1)]\mid (0,0)\ne(\lambda,\mu)\in\mathbb{F}^2\bigr \}
\end{equation*}
Ein Punkt $R\ne\patinf$ auf dieser Geraden hat somit eine Darstellung der Form:
\begin{equation*}
	R=\bigl\{[\lambda(0,1,0)+(x,y,1)]\mid 0\ne\lambda\in\mathbb{F}\bigr \}=(x:\lambda+y:1)
\end{equation*}
D.h.\ die Gerade ist affin gedeutet eine Parallele zur y-Achse durch $P$. Wir setzen $P$ und $R$ in die Gleichung der Kurve $E$ und erhalten:
\begin{alignat*}{4}
	&&y^2\stackrel{P\in\overline{\patinf,P}}{=}x^3+ax+b\stackrel{R\in\overline{\patinf,P}}{=}(\lambda+y)^2\\
	\Rightarrow&&y^2=(\lambda+y)^2
\end{alignat*}
Es folgt also $\lambda+y=-y$, denn der Fall $\lambda=0$ würde auf den Punkt $P$ führen.\\
Ist $y\ne 0$ ist der dritte Schnittpunk $\patinf\oplus P=-P$ gefunden.\\
Ist $y=0$, dann gilt nach Lemma~\ref{aff-tang} $\overline{\patinf,P}=T_P$ und somit nach Vereinbarung $\patinf\oplus P=P=-P$.\\

\underline{3. Fall:} $P\oplus Q$, falls $P=-Q$: Wir haben $x=u$.\\
Falls $y=v=0$ gilt, folgt $P=Q$ und somit nach Vereinbarung $\overline{P,Q}=\overline{P,P}=T_P$. Erneut ist $T_P$ affin gedeutet eine Parallele zur y-Achse.
Es folgt somit $P\oplus Q=\patinf$, da $\patinf$ der dritte Schnittpunkt von $T_P$ mit $E$ ist.\\
Falls $y=-v\ne 0$ gilt, erhalten wir:
\begin{align*}
	\overline{P,Q}\setminus U&=\phi((x,y)+\lambda(x-x,y-v))\\
				 &=[\mu(x,y,1)+\mu\lambda(x-x,y-v,0)]\\
	    			 &=[\mu(x,y,1)+\mu\lambda(0,1,0)]
\end{align*}
Somit hat die Gerade im projektiven den dritten Schnittpunkt mit $\patinf=(0:1:0)$, also $P\oplus Q=\patinf$.\\

\underline{Fall 4:} $P\oplus Q$, falls $P\ne\pm Q$: Da $P\ne Q$ gilt, und $P$ und $Q$ in $E$ liegen, gilt $x\ne u$. Wir setzen $k\coloneqq\frac{v-y}{u-x}$. Für die affine Gerade $\overline{P,Q}$ erhalten wir:
\begin{equation*}
	\overline{P,Q}:f(s)=k*(s-x)+y
\end{equation*}
Suchen wir nun die Schnittpunkte zwischen $\overline{P,Q}$ und $E$ erhalten wir:
\begin{alignat*}{4}
	&&(k(s-x)+y)^2&=s^3+as+b\\
	\Leftrightarrow\quad&&s^3+as+b-(k(s-x)+y)^2&=0
\end{alignat*}
Dieses kubische Polynom hat nach Konstruktion $x$ und $u$ als Nullstellen. Durch Ausmultiplizieren und Koeffizientenvergleich können wir die x-Koordinate $w$ des dritten Schnittpunktes ermitteln:
\begin{alignat*}{4}
	&&s^3-k^2s^2-\ldots&=(s-x)(s-u)(s-w)\\
	\Rightarrow&&k^2&=x+u+w\\
	\Leftrightarrow&&w&=k^2-x-u
\end{alignat*}
Durch Einsetzen von w in die Geradengleichung von $\overline{P,Q}$ ergibt sich somit \makebox{$P\oplus Q=(w,k(w-x)+y)$}.\\

\underline{5. Fall:}

\end{proof}
\subsection{Die Gruppe $(E, +)$}
Die Verknüpfung $\oplus$ hat schon einige Eigenschaften, die für eine Gruppenoperation wichtig sind.
Sie ist kommutativ und abgeschlossen. Jedoch fehlt eine wichtige Eigenschaft, nämlich die Existenz eines neutralen Elements.
Deshalb wollen wir die Verknüpfung $\oplus$ modifizieren um eine neue Verknüpfung $+$ zu erhalten, die ein neutrales Element besitzt. 
Damit erhalten wir dann eine Gruppe $(E, +)$ über elliptischen Kurven. \\
Die Definition der Verknüpfung $+$ für $P, Q \in E$ lautet folgendermaßen:
\begin{equation} \label{plus-op}
    P + Q \coloneqq \patinf \oplus (P \oplus Q) = -(P \oplus Q).
\end{equation}
Und es gilt:
\begin{thm}
    $(E, +)$ ist eine abelsche Gruppe mit neutralem Element $\patinf$.
\end{thm}
\begin{proof}
    Aus der Kommutativität von $\oplus$ folgt die Kommutativität von $+$. \\
    Des Weiteren gilt für alle $P \in E$:
    \begin{equation*}
        \patinf + P = \patinf \oplus (\patinf \oplus P) = \patinf \oplus (-P) = P
    \end{equation*}
    Damit ist $\patinf$ das neutrale Element. Außerdem gilt noch für $P \in E$:
    \begin{equation*}
        P + (-P) = \patinf \oplus (P \oplus (-P)) = \patinf \oplus \patinf = \patinf.
    \end{equation*}
    Da der Beweis für die Assoziativität sehr aufwändig ist wollen, wir diesen hier nicht erbringen und auf~\cite[Seite~20]{washington} verweisen.
    Mit Assoziativität, Kommutativität und der Existenz eines neutralen Elements mit $\patinf$ folgt, dass es sich bei $(E, +)$ um eine abelsche Gruppe handelt.
\end{proof}
Mit Hilfe der Formeln aus Satz~\ref{oplus-op} können wir die Addition $P + Q \in E$ zweier Punkte explizit formulieren.
Wir setzten $P = (p_1, p_2)$ und $Q = (q_1, q_2)$. Dann gilt 
\begin{equation} \label{addition-faelle}
    P + Q = \begin{cases}
        \patinf, & \text{falls $P=-Q$ oder $P=Q=\patinf$,} \\
        P, & \text{falls $Q=\patinf$,} \\
        Q, & \text{falls $P=\patinf$,} \\
        (\omega, - \alpha (\omega - p_1) - p_2), & \text{sonst,} \\
    \end{cases}
\end{equation}
wobei
\begin{equation}
    \omega = \alpha^2 - p_1 - q_1 \text{ und } \alpha = 
    \begin{cases}
        \frac{p_2 - q_2}{p_1 - q_1}, & \text{falls $P \neq Q, -Q$,} \\
        \frac{3p_1^2 + a}{2p_2}, & \text{falls $P = Q \neq -P$.} \\
    \end{cases}
\end{equation}
Mit $a$ ist hierbei der Koeffizient von $x$ der affinen Darstellung~(\ref{affines-polynom}) von $E$ gemeint. \\
\newline
Man spricht dabei von der Sekanten-Tangenten-Konstruktion. Mit dieser Formel kann die Addition in beliebigen Körpern $\mathbb{F}$ berechnet werden ohne auf die graphische Lösung zurückzugreifen.
Es ist also auch möglich Gruppen $(E, +)$ über endlichen Körpern $\mathbb{F}$ zu definieren.
\begin{bsp}
    Es ist möglich die Punkte $P = (-1,1)$ und $Q = (0,1)$ auf $E$ über $\mathbb{R}$ graphisch zu addieren. 
    Man zieht dazu eine Gerade durch die Punkte $P$ und $Q$ und erhält den Schnittpunkt $P \oplus Q$. Danach berechnet man den Punkt $-(P \oplus Q)$, d.h.\ man spiegelt an der $x$-Achse.
    \begin{figure}[H]
        \centering
        \subfloat[$E: y^2=x^3 - x + 1$]{
            \begin{tikzpicture}
                \begin{axis}[
                    axis equal, 
                    minor tick num={1},
                    minor tick num={1},
                    xtick={-2, 2},
                    minor xtick={-1.5,-1,-0.5,0,0.5,1,1.5},
                    minor ytick={-1.5,-1,-0.5,0,0.5,1,1.5},
                    ytick={-2, 2},
                    scale=0.8,
                    grid=both,
                    ]

                    \draw (0,1) node[label={260:\footnotesize $Q$}](Q){\textbullet};
                    \draw (-1,1) node[label={270:\footnotesize $P$}](P){\textbullet};
                    % quad for label positioning 
                    \draw (1,1) node[label={90:\footnotesize $P \oplus Q \quad $}](PQ){\textbullet};
                    \draw (1,-1) node[label={0:\footnotesize $P + Q$}](PQP){\textbullet};
                    \addplot +[no markers, raw gnuplot, thin, color=red] gnuplot {
                        set size square;
                        set xrange [-3:3];
                        set yrange [-2:2];
                        set contour base;
                        set cntrparam levels incre 0,0.1,0;
                        unset surface;
                        set isosamples 1000, 1000;
                        splot y**2 - x**3 + x - 1 
                    };
                    \addplot [thick, color=blue, domain=-2.5:2.5] {1};
                    \draw [dashed, thick, color=blue] (1,1) -- (1,-1);
                \end{axis}
            \end{tikzpicture}}
        \caption{Addition in $(E, +)$}
    \end{figure}
\end{bsp}

\section{Anwendung elliptischer Kurven in der Kryptologie}
Bis jetzt haben wir uns mit den mathematischen Grundlagen rund um elliptische Kurven beschäftigt. Wir haben den Begriff der projektiven Ebenen eingeführt und elliptische Kurven als eine Teilmenge dieser beschrieben. 
Wir haben außerdem eine Operation $+$ über den elliptischen Kurven $E$ eingeführt, mit der man eine Gruppe über $E$ erhält.
Die Frage ist nun, welche Relevanz diese Gruppe für die Kryptologie hat. \\
In der Kryptologie sind vor allem mathematische Probleme interessant, die ohne Kenntis bestimmter Variablen sehr schwer zu lösen sind. Wenn diese bestimmten Variablen bekannt sind - man spricht meist von einem Schlüssel -, dann soll das Problem jedoch leicht zu lösen sein. \\
Bei elliptischen Kurven wird sich dabei die Schwierigkeit des diskreten Logarithmierungsproblems zu Nutze gemacht.
\subsection{Verschlüsselung und das diskrete Logarithmierungsproblem}
Wir wollen zunächst das diskrete Logarithmierungsproblem wiederholen. Es ist folgendermaßen definiert:
%Seite 376 silverman
\begin{defn} \label{DLP}
    Sei $G$ eine Gruppe und seien $x,y \in G$. Das Finden von $m \in \mathbb{N} \setminus \{0\}$, so dass gilt
    \begin{equation*}
        x^m = y,
    \end{equation*}
    wird diskretes Logarithmierungsproblem(DLP) genannt. In der Kryptologie betrachten wir dabei meist endliche Gruppen.
\end{defn}
Jede Gruppe $G$ hat ihr eigenes Logarithmierungsproblem.
Bei einer elliptischen Kurve $E$ über dem Körper $F_p$ kann auch ein diskretes Logarithmierungsproblem konstruiert werden. Dazu wählen wir $P,Q \in E$ und ein $m \in \mathbb{N} \setminus \{0\}$. Das diskrete Logarithmierungsproblem ist dann die Lösung der Gleichung $mP = Q$, wobei $P$ und $Q$ bekannt sind. 
Die skalare Multiplikation in der Gruppe $E$ des Punktes $P$ wird durch wiederholtes Addieren des Punkt mit sich selbst dargestellt. 
Um die Sicherheit von Verschlüsselungsverfahren zu beurteilen, die die Gruppeneigenschaft der elliptischen Kurven $E$ verwenden, müssen wir überprüfen, wie schwer das DLP elliptischer Kurven zu lösen ist.\\
\newline
Der erste, naive Ansatz ist das Lösen des Problems durch Ausprobieren. Es wird mit $x$ gestartet und die Gruppenoperation so lange angewandt, bis das Ergebnis $y$ lautet. 
Damit ist die Laufzeit in $O(|E|)$. 
Da die Anzahl der Gruppenelemente jedoch exponentiell mit der Schlüssellänge wächst, steigt die Laufzeit des naiven Ansatzes dementsprechend exponentiell mit der Schlüssellänge.
In nahezu allen Gruppen kann das DLP schneller mit dem Babystep-Giantstep Algorithmus gelöst werden, welcher eine Laufzeit von $O(\sqrt{|E|})$ hat.
Dadurch ist die Laufzeit jedoch immer noch exponentiell. 
Ein weiteres prominentes Beispiel ist Pollard's $\rho$ Algorithmus. Auch für diesen Algorithmus kann gezeigt werden, dass die Laufzeit in $O(\sqrt{|E|})$ ist. Somit kann auch hiermit keine subexponentielle Laufzeit erreicht werden~\cite[Seite~386]{silverman}. \\
In der Tat wurde bis jetzt noch kein Algorithmus gefunden, der das DLP auf allgemeinen elliptischen Kurven in subexponentieller Zeit lösen kann. Wenn man jedoch bestimmte Einschränkungen für die Parameter trifft, dann sind durchaus subexponentielle Laufzeiten möglich~\cite{joux2011}.
Verschlüsselungsverfahren, die auf elliptischen Kurven basieren, sind also bei geeigneter Wahl der Domänenparameter sicher.\\
\newline
% Index calculus
Interessanterweise kann das DLP in endlichen Gruppen $\mathbb{F}_{p^n}$ in subexponentieller Laufzeit mit Hilfe sogenannter Index-Calculus-Algorithmen gelöst werden~\cite{joux2014}. Es ist möglich diese Algorithmen so abzuwandeln, dass sie auch für Primfaktorzerlegungen und damit auch als Angriff auf RSA geeignet sind~\cite{joux2014}.
Diese Angriffe verlassen sich jedoch darauf, dass die Gruppe Primzahlen besitzt. Da die Gruppe $(E, +)$ auf elliptische Kurven keine Primzahlen besitzt, können diese Algorithmen nur in Spezialfällen auf elliptische Kurven übertragen werden. Deswegen sind elliptische Kurven, bei geeigneter Wahl der Parameter gegen diese Angriffe, immun.
Aufgrund dessen ist das Sicherheitsniveau von ECC im Vergleich zu RSA bei gleicher Schlüssellänge deutlich höher. Dies erklärt auch die in der Einleitung gezeigte Tabelle~\ref{keylength}.

\subsection{ElGamal}
\subsubsection{Schlüsselgenerierung, Verschlüsselung und Entschlüsselung}
Wir wissen nun, dass das DLP auf elliptische Kurven schwer zu lösen ist. Das können wir uns jetzt zu Nutze machen um tatsächlich Nachrichten zu verschlüsseln. Deshalb möchten wir kurz auf ein Verschlüsselungsverfahren eingehen, dass auf der Gruppe $(E, +)$ funktioniert, nämlich das ElGamal-Verschlüsselungsverfahren.\\
\newline
Wir haben einen endlichen Körper $\mathbb{F}$, eine elliptische Kurve $E$ über $\mathbb{F}$ und einen Punkt $G \in E$ gegeben. Der Empfänger, den wir Bob nennen, wählt eine natürliche Zahl $a$, berechnet $Q = aG \in E$. \\
Bob behält $a$ als seinen geheimen Schlüssel. Der öffentliche Schlüssel ist dann $(\mathbb{F}, E, G, Q)$. Bob schickt anschließend der Senderin Alice den öffentlichen Schlüssel. Wenn Alice den Klartext $\mathcal{P} \in E$ nun verschlüsseln will muss sie 3 Schritte durchführen:
\begin{enumerate}
    \item Alice wählt zufällig eine Zahl $b \in \mathbb{N}$.
    \item Alice berechnet $B \coloneqq bG \in E$ und $C \coloneqq bQ + \mathcal{P} \in E$.
    \item Alice sendet den Geheimtext $\mathcal{C} = (B,C)$ an Bob.
\end{enumerate}
Dabei kann ein Angreifer den Klartext $\mathcal{P}$ nicht effizient berechnen, da er dafür das Logarithmierungsproblem auf elliptischen Kurven lösen müsste. \\
\newline
Bob hat von Alice jetzt den Geheimtext $\mathcal{C} = (B,C)$ erhalten und möchte mit Hilfe seines geheimen Schlüssels den Klartext $\mathcal{P}$ berechnen. Er berechnet dazu $-aB + C$. 
Da $B=bG$, $C=bQ + \mathcal{P}$ und $Q = aG$ gilt, folgt:
\begin{equation*}
    -aB + C = -abG + bQ + \mathcal{P} = -abG + abG + \mathcal{P} = \mathcal{P}.
\end{equation*}
So erhält Bob den Klartext $\mathcal{P} \in E$ aus dem Geheimtext $\mathcal{C}$. In der Praxis muss man ein Verfahren festlegen, wie man von einer Nachricht zu einem Punkt auf der elliptischen Kurve umwandelt.
\subsubsection{Effiziente Berechnung des Skalarprodukts}
% Silverman S.364
Wir haben bereits gesehen, dass die Skalarmultiplikation $aP = Q$ mit $a \in \mathbb{N}$ und $P, Q \in E$ die zentrale Operation bei der Ver- und Entschlüsselung ist. \\
Wenn man diese naiv berechnet, d.h.\ man berechnet $(\dots (((P + P) + P) + P) \dots )$ von innen nach außen, dann verhält sich die Laufzeit offensichtlich linear im Bezug auf $a$; die genaue Anzahl der Schritte beträgt $a-1$. \\
Man kann jedoch die Assoziativität der Operation $+$ ausnutzen um ein deutlich effizienteres Verfahren zu erhalten. Dabei ordnet man die einzelnen Additionen neu an.
\begin{bsp}
    Wir wollen $13P$ berechnen.
    Wenn man die Additionen in einem Baum anordnet, können Ergebnisse wiederverwendet werden. Man muss jedes Zwischenergebnis nur einmal berechnen. In diesem Beispiel verringert sich die Anzahl der Operationen von elf beim naiven Ansatz auf fünf beim effizienten Verfahren.
    \begin{figure}[H]
        \centering
        \begin{tikzpicture}
            \foreach \y in {0.0, 1.0, ..., 12.0 }{
                \draw (\y, 0) node {$P$};
            }
            \foreach \y in {0.5, 1.5, ..., 11.5} {
                \draw (\y, 0) node {$+$};
            }
            \foreach \y in {0.5, 2.5, ..., 10.5} {
                \draw (\y, -0.75) node {$2P$};
                \draw[shorten <= 0.25cm, shorten >= 0.25cm] (\y - 0.5, 0) -- (\y, -0.75);
                \draw[shorten <= 0.25cm, shorten >= 0.25cm] (\y + 0.5, 0) -- (\y, -0.75);
            }
            \foreach \y in {1.5, 5.5, ..., 9.5} {
                \draw (\y, -1.5) node {$4P$};
                \draw (\y, -0.75) node {$+$};
                \draw[shorten <= 0.25cm, shorten >= 0.25cm] (\y - 1.0, -0.75) -- (\y, -1.5);
                \draw[shorten <= 0.25cm, shorten >= 0.25cm] (\y + 1.0, -0.75) -- (\y, -1.5);
            }
            \draw (3.5, -2.25) node {$8P$}; 
            \draw (3.5, -1.5) node {$+$};
            \draw[shorten <= 0.25cm, shorten >= 0.25cm] (3.5 - 2.0, -1.5) -- (3.5, -2.25);
            \draw[shorten <= 0.25cm, shorten >= 0.25cm] (3.5 + 2.0, -1.5) -- (3.5, -2.25);
            \draw (7.5, -2.25) node {$+$};
            \draw (11.5, -2.25) node {$+$};
            \draw (9.5, -2.25) node {$4P$};
            \draw (12.0, -2.25) node {$P$};

        \end{tikzpicture}
        \caption{Effiziente Skalarmultiplikation mit Additionsbaum}
    \end{figure}
\end{bsp}
Dieses Verfahren lässt sich auch als Algorithmus formalisieren:
\begin{algorithm}[H]
    \caption{Multiplikation eines Skalars $n \in \mathbb{N}$ mit einem Punkt $P \in E$ }
  \begin{algorithmic}[1]
      \Require{$n$ lässt sich binär zerlegen in $n = n_0 + n_1 \times 2 + n_2 \times 2^2 + \dots + n_t \times 2^t$}
    \Statex
    \Function{multipliziere}{$n, P$}
    \If{$n_0 = 0$} 
    \Let{$Acc$}{$\patinf$} \Comment{$\mathcal{O}$ ist der unendlich ferne Punkt}
    \Else
    \Let{$Acc$}{$P$}
\EndIf
\For{$i \gets 1 \textrm{ to } n$}
      \Let{$P$}{$P + P$} 
      \If{$n_i = 1$}
      \Let{$Acc$}{$Acc + P$}
  \EndIf
      \EndFor
      \State \Return{$Acc$}
    \EndFunction
  \end{algorithmic}
\end{algorithm}
Wenn man diesen Algorithmus betrachten, sieht man auch, dass höchstens $2\log_2{n}$ Operationen durchgeführt werden. Die Bitlänge von n wächst mit $\log_2{n}$, was auch gleich der Anzahl der Durchläufe der Schleife ist. In jedem Schleifendurchlauf wird eine Addition mit $P+P$ durchgeführt und falls $n_0 = 1$ ist, eine weitere Addition durchgeführt. Das ergibt insgesamt $2\log_2{n}$ Additionen im worst-case. Diesen Verfahren kann auch auf beliebige Gruppen angewendet
werden, da die Assoziativität der $+$-Operation in einer Gruppe gegeben sein muss. Es gibt auch noch weitere Möglichkeiten, die Skalarmultiplikation weiter zu beschleunigen. Für Beispiele siehe dazu \cite{gallant2001} und \cite{dimitrov2005}.

\subsection{Angriffe}
\subsubsection{Universelle Angriffe} 
Um sich gegen kryptographische Angriffe auf ECC zu wehren, müssen die Domänenparameter $(\mathbb{F}_p, E, G, n)$ gut gewählt werden. 
Der naheliegenste Angriff ist der bereits beschriebene naive Angriff, bei dem die Gruppenoperation so oft auf $G$ angewendet wird, bis das Ergebnis $Q = nG$ und somit $n$ ermittelt wurde.
Diesem Angriff kann leicht vorgebeugt werden, indem man $n$ groß genug wählt, sodass dieser Brute-Force impraktikabel wird.
Des Weiteren sollte $n$ so gewählt werden, dass $n$ einen großen Primzahldivisor hat. Damit ist auch einer der besten universal anwendbaren Algorithmen, eine Kombination aus dem Pohlig-Hellman-Angriff und Pollards $\rho$ Algorithmus, nicht mehr realisierbar, da dieser darauf basiert, das Problem auf die Untergruppen mit Primzahlordnung der von $G$ erzeugten zyklischen Gruppe zu reduzieren~\cite[Seite~154-165]{hankersonguide}. 

\subsubsection{Isomorphismus Angriffe}
Sei $E$ eine elliptische Kurve über dem Körper $\mathbb{F}_q$ und $P \in E(\mathbb{F}_q)$ habe eine Primzahlordnung $n$. Sei $G$ eine Gruppe mit Ordnung $n$ und $\langle P \rangle$ die von P erzeugte, zyklische Untergruppe von $E$. Da n prim ist und $\langle P \rangle$ und $G$ zyklisch sind, sind sie auch isomorph~\cite[Seite~168]{hankersonguide}. Wenn man also diesen Isomorphismus 
\begin{equation*}
    \phi : \langle P \rangle \mapsto G
\end{equation*}
effizient berechnen kann, dann kann man das DLP auf elliptischen Kurven auf das DLP auf $G$ reduzieren. Wie bereits erwähnt, kann das DLP auch mit subexponentieller Laufzeit gelöst werden. \\ 
\newline
Ein Beispiel für elliptische Kurven, für die eine solcher Isomorphismus existiert, sind die sogenannten anomale Elliptische Kurven. Eine elliptische Kurve ist anomal, wenn $\#E(\mathbb{F}_p) = p$, d.h.\ die Anzahl der Punkte von $E$ ist gleich der Anzahl der Elemente des Körpers $\mathbb{F}_p$. 
Für eine anomale Kurve $E(\mathbb{F}_p)$ gilt, dass sie isomorph zur additiven Gruppe $\mathbb{F}^+_p$ ist. In einer additiven Gruppe kann das Problem effizient durch Berechnen des inversen Elements mit Hilfe des euklidischen Algorithmus gelöst werden.
Auch der Isomorphismus kann effizient berechnet werden~\cite[Seite~168]{hankersonguide}. Daraus folgt, dass das DLP auf diesen speziellen elliptischen Kurven effizient gelöst werden kann.
Deshalb sollten diese Kurven nicht für Verschlüsselung verwendet werden. \\
\newline
Weitere Angriffe, die auf Isomorphismen beruhen, sind z.B.\ Weil und Tate Paarung oder der Weil Abstieg~\cite[Seite~169-170]{hankersonguide}. Die elliptische Kurve sollte entsprechend gewählt werden um solche Angriffe abzuwehren.

\subsubsection{Seitenkanalangriffe}
Bei einem Seitenkanalangriff hat der Angreifer phyische Kontrolle über das Gerät, welches für die Verschlüsselung zuständig ist.
Das ermöglicht dem Angreifer durch Messsen von Werten wie Prozessorgeschwindigkeit und Stromverbrauch Rückschlüsse auf die Operationen, die das Gerät durchführt, zu ziehen.\\
Seitenkanalangriffe sind bei elliptischen Kurven sehr interessant, da diese aufgrund der Schlüssellänge in Geräten verwendet werden, die wenig Speicherplatz und Rechenkapazität haben. Dazu gehören Smartcards, welche z.B.\ den ordnungsgemäßen Zugriff auf zahlungspflichtige TV-Sender sicherstellen. In diesem Fall befindet sich die Smartcard dann im physischen Besitz eines potentiellen Angreifers.
Ein großes Problem bei ECC ist, dass die Operation der Verdopplung eines Punkts und die Addition zweier verschiedener Punkte unter einigen Implementierungen unterschiedlich viel Rechenleistung benötigen, wodurch der Angreifer Rückschlüsse auf den privaten Schlüssel ziehen kann~\cite{moller2001}. 
Das liegt daran, dass bei Verdopplung, bei Addition mit dem unendlich fernen Punkt und bei Addition mit dem inversen Punkt Fallunterscheidungen notwendig sind, siehe~\ref{addition-faelle}. Es gibt mehrere Ansätze dieses Problem zu lösen.\\
Ein Lösungsansatz ist das Durchführen von Dummy-Additionen, also Additionen deren Ergebnis danach wieder verworfen wird. Jedoch kann es dem Angreifer möglich sein dies zu bemerken~\cite{moller2001}.
Möller schlägt daher ein speziellen Encoding-Algorithmus vor, der gegen Seitenkanalangriffe unter den meisten Bedingungen absichert~\cite{moller2001}. 
Es gibt auch noch weitere Ansätze, von denen manche bestimmte elliptische Kurven verwenden um das Problem beheben zu können~\cite{moller2001}.

\subsection{Edwards Kurven}
Wir wollen zuletzt noch eine Normalform elliptischer Kurven ansprechen, die durch ihre Form die bereits angesprochenen Seitenkanalangriffe verhindern kann.
Eine Kurve nach Edward hat die Form $x^2 + y^2 = c^2(1+x^2+y^2)$, wobei das neutrale Element $(0,c)$ ist. 
Alle elliptischen Kurven über nicht-binären Körpern können in diese Form gebracht werden~\cite{bernstein2007}. 
Wenn die Kurven in dieser Form sind, dann ist die Addition deutlich einfacher als die Addition auf elliptischen Kurven in der Weierstraßform.
Sie ist folgendermaßen definiert:
\begin{equation*}
    (x_1, y_1) + (x_2, y_2) = \left( \frac{x_1y_2 + y_1x_2}{c(1+x_1x_2y_1y_2)} , \frac{y_1y_2 - x_1x_2}{c(1-x_1x_2y_1y_2)} \right).
\end{equation*}
Wie man sehen kann sind keine Fallunterscheidungen notwendig für Dopplung und Addition mit dem neutralen oder inversen Element notwendig. 
Damit werden Seitenkanalangriffe, die darauf basieren, dass Addition und Dopplung unterschiedlich viel Rechenleistungen benötigen, deutlich erschwert. 
Zusätzlich ist diese Addition auch effizient und kann mit anderen Verfahren, die auf Schnelligkeit ausgelegt sind, mithalten~\cite{bernstein2007}. \\
\newline
Edwards Kurven sind eine mögliche Weiterentwicklung der elliptischen Kurven. Es gibt auch noch weitere Möglichkeiten elliptische Kurven anzupassen um kryptographisch interessante Probleme zu lösen. Ein Beispiel wäre die Verwendung von elliptischen Kurven um große Zahlen zu faktorisieren, was auch ein zentrales Thema der Kryptologie ist~\cite{lenstra1987}.
Insgesamt haben elliptische Kurven durch ihre Eigenschaften eine zentrale Rolle in der Kryptologie erhalten und werden wohl auch in der Zukunft noch relevant sein.
\end{sloppypar}
\newpage
\bibliographystyle{plain}
\bibliography{quellen}
\end{document}
